function createMap(){function e(){s.forEach(function(e){e.setMap(null)}),s=[]}function o(){var e=document.getElementById("y").value;m.geocode({address:e},function(o,n){function a(e,n){function a(e){var o=e*Math.PI/180;return o}function l(){var t=a(e[g].geometry.location.lat()-o[0].geometry.location.lat()),n=a(e[g].geometry.location.lng()-o[0].geometry.location.lng()),l=3961,c=Math.pow(Math.sin(t/2),2)+Math.cos(a(o[0].geometry.location.lat()))*Math.cos(a(e[g].geometry.location.lat()))*Math.pow(Math.sin(n/2),2),i=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),m=l*i;return m}if(n===google.maps.places.PlacesServiceStatus.OK)for(var g=0;g<e.length;g++){t(e[g]);var c=document.getElementById("distance"),i=document.createElement("li"),m=document.createTextNode(e[g].name+" is "+l().toFixed(2)+" miles away");i.appendChild(m),c.appendChild(i)}}if(n===google.maps.GeocoderStatus.OK){var l={map:i,position:o[0].geometry.location,animation:google.maps.Animation.DROP,label:e},g=new google.maps.Marker(l);s.push(g),i.setCenter(o[0].geometry.location)}else alert("Oops it broke");var c=document.getElementById("x").value,m=new google.maps.places.PlacesService(i);m.nearbySearch({location:o[0].geometry.location,keyword:c,rankBy:google.maps.places.RankBy.DISTANCE},a)})}function t(e){var o=e.geometry.location,t={map:i,position:o,animation:google.maps.Animation.DROP},n=new google.maps.Marker(t);s.push(n),google.maps.event.addListener(n,"mouseover",function(){r.setContent(e.name),r.open(i,this)})}var n=new google.maps.LatLngBounds(new google.maps.LatLng(-90,-180),new google.maps.LatLng(90,180)),a=document.getElementById("y"),l=(new google.maps.places.SearchBox(a,{bounds:n}),document.getElementById("map")),g={lat:33.6937232,lng:-117.8055461},c={center:g,zoom:14,scrollwheel:!1},i=new google.maps.Map(l,c),m=new google.maps.Geocoder,r=new google.maps.InfoWindow,s=[],p=document.getElementById("go");p.addEventListener("click",function(){e(),o()},!1)}